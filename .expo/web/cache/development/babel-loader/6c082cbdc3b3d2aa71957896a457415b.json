{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/stevenchang/GitHub/4Blind/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { useState, useEffect, Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Colors } from 'react-native/Libraries/NewAppScreen';\nimport { Camera } from 'expo-camera';\nimport * as FaceDetector from 'expo-face-detector';\nimport { AntDesign } from '@expo/vector-icons';\nimport { Audio } from 'expo-av';\nvar soundObject = new Audio.Sound();\n\nvar App = function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      hasPermission: null,\n      type: Camera.Constants.Type.back,\n      faces: [],\n      picture: null,\n      hasMask: false,\n      audioPlaying: true\n    };\n\n    _this.onFacesDetected = function (obj) {\n      _this.setState({\n        faces: obj.faces\n      });\n\n      if (_this.state.audioPlaying) {\n        _this.setState({\n          audioPlaying: false\n        });\n\n        _this.playSound();\n      }\n\n      setTimeout(function _callee() {\n        var photo;\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(_this.camera.takePictureAsync({\n                  base64: true\n                }));\n\n              case 2:\n                photo = _context.sent;\n                console.ignoredYellowBox = ['Warning: Each', 'Warning: Failed'];\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }, 1000);\n    };\n\n    _this.playSound = function () {\n      soundObject.playAsync();\n      soundObject.replayAsync();\n      setTimeout(function () {\n        _this.setState({\n          audioPlaying: true\n        });\n      }, 3000);\n    };\n\n    _this.renderFaces = function () {\n      return React.createElement(View, {\n        style: styles.facesContainer,\n        pointerEvents: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 3\n        }\n      }, _this.state.faces.map(_this.renderFace));\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      (function _callee2() {\n        var _await$Camera$request, status, playback;\n\n        return _regeneratorRuntime.async(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n              case 2:\n                _await$Camera$request = _context2.sent;\n                status = _await$Camera$request.status;\n\n                _this2.setState({\n                  hasPermission: status === 'granted'\n                });\n\n                _context2.next = 7;\n                return _regeneratorRuntime.awrap(soundObject.loadAsync(require(\"./watchout.mp3\")));\n\n              case 7:\n                _context2.next = 9;\n                return _regeneratorRuntime.awrap(Audio.Sound.createAsync(require(\"./welcome.mp3\"), {\n                  shouldPlay: true\n                }));\n\n              case 9:\n                playback = _context2.sent;\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      })();\n    }\n  }, {\n    key: \"renderFace\",\n    value: function renderFace(_ref) {\n      var bounds = _ref.bounds,\n          faceID = _ref.faceID,\n          rollAngle = _ref.rollAngle,\n          yawAngle = _ref.yawAngle,\n          leftCheekPosition = _ref.leftCheekPosition,\n          leftMouthPosition = _ref.leftMouthPosition,\n          noseBasePosition = _ref.noseBasePosition,\n          rightCheekPosition = _ref.rightCheekPosition,\n          rightMouthPosition = _ref.rightMouthPosition;\n      return React.createElement(View, {\n        key: faceID,\n        transform: [{\n          perspective: 600\n        }, {\n          rotateZ: rollAngle.toFixed(0) + \"deg\"\n        }, {\n          rotateY: yawAngle.toFixed(0) + \"deg\"\n        }],\n        style: [styles.face, _objectSpread(_objectSpread({}, bounds.size), {}, {\n          left: bounds.origin.x,\n          top: bounds.origin.y\n        })],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: styles.faceText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }\n      }, \"size: \", bounds.size.height * bounds.size.width), React.createElement(Text, {\n        style: styles.faceText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 9\n        }\n      }, \"width: \", bounds.size.width), React.createElement(Text, {\n        style: styles.faceText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }\n      }, \"height: \", bounds.size.height));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.hasPermission === null) {\n        return React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (this.state.hasPermission === false) {\n        return React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 14\n          }\n        }, \"No access to camera\");\n      } else return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 7\n        }\n      }, React.createElement(Camera, {\n        ref: function ref(_ref2) {\n          _this3.camera = _ref2;\n        },\n        style: {\n          flex: 1\n        },\n        type: this.state.type,\n        onFacesDetected: this.onFacesDetected,\n        faceDetectorSettings: {\n          mode: FaceDetector.Constants.Mode.fast,\n          detectLandmarks: FaceDetector.Constants.Landmarks.all,\n          runClassifications: FaceDetector.Constants.Classifications.all,\n          minDetectionInterval: 100,\n          tracking: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          backgroundColor: 'transparent',\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          flex: 0.1,\n          alignSelf: 'flex-end',\n          alignItems: 'center'\n        },\n        onPress: function onPress() {\n          if (_this3.state.type === Camera.Constants.Type.back) {\n            _this3.setState({\n              type: Camera.Constants.Type.front\n            });\n          } else {\n            _this3.setState({\n              type: Camera.Constants.Type.back\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }\n      }, React.createElement(AntDesign, {\n        name: \"retweet\",\n        size: 80,\n        style: {\n          marginLeft: 100,\n          width: 100\n        },\n        color: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }\n      })))), this.renderFaces());\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar styles = StyleSheet.create({\n  scrollView: {\n    backgroundColor: Colors.lighter\n  },\n  engine: {\n    position: 'absolute',\n    right: 0\n  },\n  body: {\n    backgroundColor: Colors.white\n  },\n  sectionContainer: {\n    marginTop: 32,\n    paddingHorizontal: 24\n  },\n  sectionTitle: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: Colors.black\n  },\n  sectionDescription: {\n    marginTop: 8,\n    fontSize: 18,\n    fontWeight: '400',\n    color: Colors.dark\n  },\n  highlight: {\n    fontWeight: '700'\n  },\n  footer: {\n    color: Colors.dark,\n    fontSize: 12,\n    fontWeight: '600',\n    padding: 4,\n    paddingRight: 12,\n    textAlign: 'right'\n  },\n  facesContainer: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    left: 0,\n    top: 0\n  },\n  face: {\n    padding: 10,\n    borderWidth: 2,\n    borderRadius: 2,\n    position: 'absolute',\n    borderColor: '#FFD700',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  faceText: {\n    color: '#FFD700',\n    fontWeight: 'bold',\n    textAlign: 'center',\n    margin: 10,\n    backgroundColor: 'transparent'\n  }\n});\nexport default App;","map":{"version":3,"sources":["/Users/stevenchang/GitHub/4Blind/App.js"],"names":["React","useState","useEffect","Component","Colors","Camera","FaceDetector","AntDesign","Audio","soundObject","Sound","App","state","hasPermission","type","Constants","Type","back","faces","picture","hasMask","audioPlaying","onFacesDetected","obj","setState","playSound","setTimeout","camera","takePictureAsync","base64","photo","console","ignoredYellowBox","playAsync","replayAsync","renderFaces","styles","facesContainer","map","renderFace","requestPermissionsAsync","status","loadAsync","require","createAsync","shouldPlay","playback","bounds","faceID","rollAngle","yawAngle","leftCheekPosition","leftMouthPosition","noseBasePosition","rightCheekPosition","rightMouthPosition","perspective","rotateZ","toFixed","rotateY","face","size","left","origin","x","top","y","faceText","height","width","flex","ref","mode","Mode","fast","detectLandmarks","Landmarks","all","runClassifications","Classifications","minDetectionInterval","tracking","backgroundColor","flexDirection","alignSelf","alignItems","front","marginLeft","StyleSheet","create","scrollView","lighter","engine","position","right","body","white","sectionContainer","marginTop","paddingHorizontal","sectionTitle","fontSize","fontWeight","color","black","sectionDescription","dark","highlight","footer","padding","paddingRight","textAlign","bottom","borderWidth","borderRadius","borderColor","justifyContent","margin"],"mappings":"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","sourcesContent":["/**\n * Sample React Native App\n * https://github.com/facebook/react-native\n *\n * @format\n * @flow strict-local\n */\n\nimport React, { useState, useEffect, Component } from 'react';\n\nimport {\n  StyleSheet,\n  View,\n  Text,\n  StatusBar,\n  TouchableOpacity\n} from 'react-native';\n\nimport {\n  Colors,\n} from 'react-native/Libraries/NewAppScreen';\n\nimport { Camera } from 'expo-camera';\n\nimport * as FaceDetector from 'expo-face-detector';\n\n//import { bundleResourceIO } from '@tensorflow/tfjs-react-native';\n\nimport { AntDesign } from '@expo/vector-icons';\n\n// import { Player } from '@react-native-community/audio-toolkit';\n// import SoundPlayer from 'react-native-sound-player'\n// var Sound = require('react-native-sound');\nimport { Audio } from 'expo-av';\n\n// const filename = './audio/welcome.mp3'\nconst soundObject = new Audio.Sound();\n\n\nclass App extends Component {\n  \n  state = {\n    hasPermission: null,\n    type: Camera.Constants.Type.back,\n    faces: [],\n    picture: null,\n    hasMask: false,\n    audioPlaying: true\n  }\n\n  model\n\n  componentWillMount(){\n    (async () => {\n        const { status } = await Camera.requestPermissionsAsync();\n        //Get permission\n        this.setState({hasPermission: status === 'granted'});\n        await soundObject.loadAsync(require('./watchout.mp3'));\n        const playback = await Audio.Sound.createAsync(\n              require('./welcome.mp3'),\n              { shouldPlay: true }\n            )\n    })();\n  }\n\n  onFacesDetected = (obj) => {\n    //if(obj.faces[0])console.log(obj.faces[0].noseBasePosition)\n    this.setState({ faces: obj.faces });\n    //console.log(this.state.audioPlaying);\n    if (this.state.audioPlaying) {\n      //console.log('play sound')\n      this.setState({audioPlaying: false});\n      this.playSound();\n    }\n\n    setTimeout(async () => {\n      let photo = await this.camera.takePictureAsync({base64: true});\n      console.ignoredYellowBox = ['Warning: Each', 'Warning: Failed'];\n      //console.log(photo.uri)\n      //Do the api call\n\n\n    }, 1000)\n  }\n  \n  // playSound = () => {\n  //   (async () => {\n  //     await soundObject.playAsync();\n  //     await soundObject.replayAsync();\n  //   })();\n  // }\n\n  playSound = () => {\n      //console.log(this.state.audioPlaying);\n      soundObject.playAsync();\n      soundObject.replayAsync();\n      setTimeout(() => {\n        this.setState({audioPlaying: true});\n        }, 3000);\n      //console.log(this.state.audioPlaying);\n  }\n\n  // playSound = () => {\n  //   const soundObject = new Audio.Sound();\n  //   try {\n  //     soundObject.loadAsync(require('./welcome.mp3'));\n  //     soundObject.setVolumeAsync(0.9)\n  //     soundObject.playAsync();\n  //     console.log()\n  //     soundObject.replayAsync();\n      \n  //     // Your sound is playing!\n\n  //     // Don't forget to unload the sound from memory\n  //     // when you are done using the Sound object\n  //     soundObject.unloadAsync();\n  //     console.log('works')\n  //   } catch (error) {\n  //     // An error occurred!\n  //     console.log(error)\n  //   }\n  // }\n\n  // handleFacesDetected(obj){\n  //   this.updateFaces(obj)\n  //   console.log(obj);\n  // }\n\n  renderFaces = () => \n  <View style={styles.facesContainer} pointerEvents=\"none\">\n    {this.state.faces.map(this.renderFace)}\n  </View>\n\n  renderFace({ bounds, faceID, rollAngle, yawAngle,leftCheekPosition,leftMouthPosition, noseBasePosition, rightCheekPosition, rightMouthPosition }) {\n    return (\n      <View\n        key={faceID}\n        transform={[\n          { perspective: 600 },\n          { rotateZ: `${rollAngle.toFixed(0)}deg` },\n          { rotateY: `${yawAngle.toFixed(0)}deg` },\n        ]}\n        style={[\n          styles.face,\n          {\n            ...bounds.size,\n            left: bounds.origin.x,\n            top: bounds.origin.y,\n          },\n        ]}>\n        <Text style={styles.faceText}>size: {bounds.size.height * bounds.size.width}</Text>\n        <Text style={styles.faceText}>width: {bounds.size.width}</Text>\n        <Text style={styles.faceText}>height: {bounds.size.height}</Text>\n\n      </View>\n    );\n  }\n\n  render(){\n\n    if (this.state.hasPermission === null) {\n      return <View />;\n    }\n    if (this.state.hasPermission === false) {\n      return <Text>No access to camera</Text>;\n    }else return (\n      <View style={{ flex: 1 }}>\n        <Camera\n          ref={ref => {\n            this.camera = ref;\n          }}\n          style={{ flex: 1 }} \n          type={this.state.type}\n          onFacesDetected={this.onFacesDetected}\n          faceDetectorSettings={{\n            mode: FaceDetector.Constants.Mode.fast,\n            detectLandmarks: FaceDetector.Constants.Landmarks.all,\n            runClassifications: FaceDetector.Constants.Classifications.all,\n            minDetectionInterval: 100,\n            tracking: true,\n          }}\n          >\n          <View\n            style={{\n              flex: 1,\n              backgroundColor: 'transparent',\n              flexDirection: 'row',\n            }}>\n            <TouchableOpacity\n              style={{\n                flex: 0.1,\n                alignSelf: 'flex-end',\n                alignItems: 'center',\n              }}\n              onPress={() => {\n                if(this.state.type === Camera.Constants.Type.back){\n                  this.setState({type: Camera.Constants.Type.front});\n                }else{\n                  this.setState({type: Camera.Constants.Type.back})\n                }\n              }}>\n  \n              <AntDesign name=\"retweet\" size={80} style={{marginLeft: 100, width: 100}} color=\"black\" />\n              \n            </TouchableOpacity>\n          </View>\n        </Camera>\n        {this.renderFaces()}\n      </View>\n    );\n  }\n\n}\n\nconst styles = StyleSheet.create({\n  scrollView: {\n    backgroundColor: Colors.lighter,\n  },\n  engine: {\n    position: 'absolute',\n    right: 0,\n  },\n  body: {\n    backgroundColor: Colors.white,\n  },\n  sectionContainer: {\n    marginTop: 32,\n    paddingHorizontal: 24,\n  },\n  sectionTitle: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: Colors.black,\n  },\n  sectionDescription: {\n    marginTop: 8,\n    fontSize: 18,\n    fontWeight: '400',\n    color: Colors.dark,\n  },\n  highlight: {\n    fontWeight: '700',\n  },\n  footer: {\n    color: Colors.dark,\n    fontSize: 12,\n    fontWeight: '600',\n    padding: 4,\n    paddingRight: 12,\n    textAlign: 'right',\n  },\n  facesContainer: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    left: 0,\n    top: 0,\n  },\n  face: {\n    padding: 10,\n    borderWidth: 2,\n    borderRadius: 2,\n    position: 'absolute',\n    borderColor: '#FFD700',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  faceText: {\n    color: '#FFD700',\n    fontWeight: 'bold',\n    textAlign: 'center',\n    margin: 10,\n    backgroundColor: 'transparent',\n  },\n});\n\nexport default App;"]},"metadata":{},"sourceType":"module"}