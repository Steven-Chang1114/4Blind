{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/stevenchang/GitHub/4Blind/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { useState, useEffect, Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Colors } from 'react-native/Libraries/NewAppScreen';\nimport { Camera } from 'expo-camera';\nimport * as FaceDetector from 'expo-face-detector';\n\nvar tf = require(\"@tensorflow/tfjs\");\n\nimport { fetch as fetchPolyfill } from 'whatwg-fetch';\nimport { AntDesign } from '@expo/vector-icons';\n\nvar App = function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      hasPermission: null,\n      type: Camera.Constants.Type.back,\n      faces: [],\n      picture: null,\n      hasMask: false,\n      isTfReady: false,\n      isModelReady: false\n    };\n\n    _this.onFacesDetected = function _callee(obj) {\n      var data, picture;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(_this.camera.takePictureAsync());\n\n            case 2:\n              data = _context.sent;\n              picture = data.uri;\n              if (_this.state.isModelReady) console.log(_this.model);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.renderFaces = function () {\n      return React.createElement(View, {\n        style: styles.facesContainer,\n        pointerEvents: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 3\n        }\n      }, _this.state.faces.map(_this.renderFace));\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      (function _callee2() {\n        var _await$Camera$request, status;\n\n        return _regeneratorRuntime.async(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n              case 2:\n                _await$Camera$request = _context2.sent;\n                status = _await$Camera$request.status;\n\n                _this2.setState({\n                  hasPermission: status === 'granted'\n                });\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      })();\n    }\n  }, {\n    key: \"renderFace\",\n    value: function renderFace(_ref) {\n      var bounds = _ref.bounds,\n          faceID = _ref.faceID,\n          rollAngle = _ref.rollAngle,\n          yawAngle = _ref.yawAngle,\n          leftCheekPosition = _ref.leftCheekPosition,\n          leftMouthPosition = _ref.leftMouthPosition,\n          noseBasePosition = _ref.noseBasePosition,\n          rightCheekPosition = _ref.rightCheekPosition,\n          rightMouthPosition = _ref.rightMouthPosition;\n      return React.createElement(View, {\n        key: faceID,\n        transform: [{\n          perspective: 600\n        }, {\n          rotateZ: rollAngle.toFixed(0) + \"deg\"\n        }, {\n          rotateY: yawAngle.toFixed(0) + \"deg\"\n        }],\n        style: [styles.face, _objectSpread(_objectSpread({}, bounds.size), {}, {\n          left: bounds.origin.x,\n          top: bounds.origin.y\n        })],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: styles.faceText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }\n      }, \"ID: \", faceID), React.createElement(Text, {\n        style: styles.faceText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      }, \"rollAngle: \", rollAngle.toFixed(0)), React.createElement(Text, {\n        style: styles.faceText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }\n      }, \"yawAngle: \", yawAngle.toFixed(0)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.hasPermission === null) {\n        return React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 14\n          }\n        });\n      }\n\n      if (this.state.hasPermission === false) {\n        return React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 14\n          }\n        }, \"No access to camera\");\n      } else return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }\n      }, React.createElement(Camera, {\n        ref: function ref(_ref2) {\n          _this3.camera = _ref2;\n        },\n        style: {\n          flex: 1\n        },\n        type: this.state.type,\n        onFacesDetected: this.onFacesDetected,\n        faceDetectorSettings: {\n          mode: FaceDetector.Constants.Mode.fast,\n          detectLandmarks: FaceDetector.Constants.Landmarks.all,\n          runClassifications: FaceDetector.Constants.Classifications.all,\n          minDetectionInterval: 100,\n          tracking: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          backgroundColor: 'transparent',\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          flex: 0.1,\n          alignSelf: 'flex-end',\n          alignItems: 'center'\n        },\n        onPress: function onPress() {\n          if (_this3.state.type === Camera.Constants.Type.back) {\n            _this3.setState({\n              type: Camera.Constants.Type.front\n            });\n          } else {\n            _this3.setState({\n              type: Camera.Constants.Type.back\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }\n      }, React.createElement(AntDesign, {\n        name: \"retweet\",\n        size: 80,\n        style: {\n          marginLeft: 100,\n          width: 100\n        },\n        color: \"black\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }\n      })))), this.renderFaces());\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar styles = StyleSheet.create({\n  scrollView: {\n    backgroundColor: Colors.lighter\n  },\n  engine: {\n    position: 'absolute',\n    right: 0\n  },\n  body: {\n    backgroundColor: Colors.white\n  },\n  sectionContainer: {\n    marginTop: 32,\n    paddingHorizontal: 24\n  },\n  sectionTitle: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: Colors.black\n  },\n  sectionDescription: {\n    marginTop: 8,\n    fontSize: 18,\n    fontWeight: '400',\n    color: Colors.dark\n  },\n  highlight: {\n    fontWeight: '700'\n  },\n  footer: {\n    color: Colors.dark,\n    fontSize: 12,\n    fontWeight: '600',\n    padding: 4,\n    paddingRight: 12,\n    textAlign: 'right'\n  },\n  facesContainer: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    left: 0,\n    top: 0\n  },\n  face: {\n    padding: 10,\n    borderWidth: 2,\n    borderRadius: 2,\n    position: 'absolute',\n    borderColor: '#FFD700',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  faceText: {\n    color: '#FFD700',\n    fontWeight: 'bold',\n    textAlign: 'center',\n    margin: 10,\n    backgroundColor: 'transparent'\n  }\n});\nexport default App;","map":{"version":3,"sources":["/Users/stevenchang/GitHub/4Blind/App.js"],"names":["React","useState","useEffect","Component","Colors","Camera","FaceDetector","tf","require","fetch","fetchPolyfill","AntDesign","App","state","hasPermission","type","Constants","Type","back","faces","picture","hasMask","isTfReady","isModelReady","onFacesDetected","obj","camera","takePictureAsync","data","uri","console","log","model","renderFaces","styles","facesContainer","map","renderFace","requestPermissionsAsync","status","setState","bounds","faceID","rollAngle","yawAngle","leftCheekPosition","leftMouthPosition","noseBasePosition","rightCheekPosition","rightMouthPosition","perspective","rotateZ","toFixed","rotateY","face","size","left","origin","x","top","y","faceText","flex","ref","mode","Mode","fast","detectLandmarks","Landmarks","all","runClassifications","Classifications","minDetectionInterval","tracking","backgroundColor","flexDirection","alignSelf","alignItems","front","marginLeft","width","StyleSheet","create","scrollView","lighter","engine","position","right","body","white","sectionContainer","marginTop","paddingHorizontal","sectionTitle","fontSize","fontWeight","color","black","sectionDescription","dark","highlight","footer","padding","paddingRight","textAlign","bottom","borderWidth","borderRadius","borderColor","justifyContent","margin"],"mappings":"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","sourcesContent":["/**\n * Sample React Native App\n * https://github.com/facebook/react-native\n *\n * @format\n * @flow strict-local\n */\n\nimport React, { useState, useEffect, Component } from 'react';\n\nimport {\n  StyleSheet,\n  View,\n  Text,\n  StatusBar,\n  TouchableOpacity\n} from 'react-native';\n\nimport {\n  Colors,\n} from 'react-native/Libraries/NewAppScreen';\n\nimport { Camera } from 'expo-camera';\n\nimport * as FaceDetector from 'expo-face-detector';\nconst tf = require(\"@tensorflow/tfjs\");\n//import * as mobilenet from '@tensorflow-models/mobilenet'\nimport {fetch as fetchPolyfill} from 'whatwg-fetch'\n\n//import { bundleResourceIO } from '@tensorflow/tfjs-react-native';\n\nimport { AntDesign } from '@expo/vector-icons';\n\n// import { Player } from '@react-native-community/audio-toolkit';\n// import SoundPlayer from 'react-native-sound-player'\n// var Sound = require('react-native-sound');\n\n// const filename = './audio/welcome.mp3'\n\nclass App extends Component {\n  \n  state = {\n    hasPermission: null,\n    type: Camera.Constants.Type.back,\n    faces: [],\n    picture: null,\n    hasMask: false,\n    isTfReady: false,\n    isModelReady: false\n  }\n\n  model\n\n  componentWillMount(){\n    (async () => {\n        const { status } = await Camera.requestPermissionsAsync();\n        //Get permission\n        this.setState({hasPermission: status === 'granted'});\n    })();\n  }\n\n\n  onFacesDetected = async (obj) => {\n    //Take picture in realtime\n    const data = await this.camera.takePictureAsync();\n    const picture = data.uri;\n    //console.log(this.model)\n    if(this.state.isModelReady) console.log(this.model);\n    //const results = await this.model.detect(picture);\n  }\n  \n\n  // handleFacesDetected(obj){\n  //   this.updateFaces(obj)\n  //   console.log(obj);\n  // }\n\n  renderFaces = () => \n  <View style={styles.facesContainer} pointerEvents=\"none\">\n    {this.state.faces.map(this.renderFace)}\n  </View>\n\n  renderFace({ bounds, faceID, rollAngle, yawAngle,leftCheekPosition,leftMouthPosition, noseBasePosition, rightCheekPosition, rightMouthPosition }) {\n    return (\n      <View\n        key={faceID}\n        transform={[\n          { perspective: 600 },\n          { rotateZ: `${rollAngle.toFixed(0)}deg` },\n          { rotateY: `${yawAngle.toFixed(0)}deg` },\n        ]}\n        style={[\n          styles.face,\n          {\n            ...bounds.size,\n            left: bounds.origin.x,\n            top: bounds.origin.y,\n          },\n        ]}>\n        <Text style={styles.faceText}>ID: {faceID}</Text>\n        <Text style={styles.faceText}>rollAngle: {rollAngle.toFixed(0)}</Text>\n        <Text style={styles.faceText}>yawAngle: {yawAngle.toFixed(0)}</Text>\n      </View>\n    );\n  }\n\n  render(){\n\n    if (this.state.hasPermission === null) {\n      return <View />;\n    }\n    if (this.state.hasPermission === false) {\n      return <Text>No access to camera</Text>;\n    }else return (\n      <View style={{ flex: 1 }}>\n        <Camera\n          ref={ref => {\n            this.camera = ref;\n          }}\n          style={{ flex: 1 }} \n          type={this.state.type}\n          onFacesDetected={this.onFacesDetected}\n          faceDetectorSettings={{\n            mode: FaceDetector.Constants.Mode.fast,\n            detectLandmarks: FaceDetector.Constants.Landmarks.all,\n            runClassifications: FaceDetector.Constants.Classifications.all,\n            minDetectionInterval: 100,\n            tracking: true,\n          }}\n          >\n          <View\n            style={{\n              flex: 1,\n              backgroundColor: 'transparent',\n              flexDirection: 'row',\n            }}>\n            <TouchableOpacity\n              style={{\n                flex: 0.1,\n                alignSelf: 'flex-end',\n                alignItems: 'center',\n              }}\n              onPress={() => {\n                if(this.state.type === Camera.Constants.Type.back){\n                  this.setState({type: Camera.Constants.Type.front});\n                }else{\n                  this.setState({type: Camera.Constants.Type.back})\n                }\n              }}>\n  \n              <AntDesign name=\"retweet\" size={80} style={{marginLeft: 100, width: 100}} color=\"black\" />\n              \n            </TouchableOpacity>\n          </View>\n        </Camera>\n        {this.renderFaces()}\n      </View>\n    );\n  }\n\n}\n\nconst styles = StyleSheet.create({\n  scrollView: {\n    backgroundColor: Colors.lighter,\n  },\n  engine: {\n    position: 'absolute',\n    right: 0,\n  },\n  body: {\n    backgroundColor: Colors.white,\n  },\n  sectionContainer: {\n    marginTop: 32,\n    paddingHorizontal: 24,\n  },\n  sectionTitle: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: Colors.black,\n  },\n  sectionDescription: {\n    marginTop: 8,\n    fontSize: 18,\n    fontWeight: '400',\n    color: Colors.dark,\n  },\n  highlight: {\n    fontWeight: '700',\n  },\n  footer: {\n    color: Colors.dark,\n    fontSize: 12,\n    fontWeight: '600',\n    padding: 4,\n    paddingRight: 12,\n    textAlign: 'right',\n  },\n  facesContainer: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    left: 0,\n    top: 0,\n  },\n  face: {\n    padding: 10,\n    borderWidth: 2,\n    borderRadius: 2,\n    position: 'absolute',\n    borderColor: '#FFD700',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  faceText: {\n    color: '#FFD700',\n    fontWeight: 'bold',\n    textAlign: 'center',\n    margin: 10,\n    backgroundColor: 'transparent',\n  },\n});\n\nexport default App;"]},"metadata":{},"sourceType":"module"}